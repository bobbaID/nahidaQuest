<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name = "viewport" content = "width=device-width, initial-scale=1, maximum-scale=1">
    <style>

        body {
          background: #555;
          position: relative;
        }
        
        .content {
          max-width: 1200px;
          margin: auto;
          background: white;
          padding: 10px;
        }

        body {
  font-family: sans-serif;
  display: grid;
  height: 100vh;
  place-items: center;
}

.floatingText {
    position: absolute;
    animation: fadeOutOpacity 4s cubic-bezier(.02,.57,.7,.29);
  }

@keyframes fadeOutOpacity {
    from {opacity: 1;}
    to {opacity: 0;
        top: -300px;}
  }

 

.falling-image {
    position: absolute;
    opacity: 1;
    z-Index: 3;
}

@keyframes fall {
    from { top: -5vh;}
    to { top: 100vh; }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}



/* 
.container {
  left:100px; 
  top:300px; 
  position: absolute;
}

.countdown-number {
  color: white;
  display: inline-block;
  width: 48px;
  height: 49px;
}

svg {
  position: relative;
  top: -4px;
  left: -3px;
  width: 48px;
  height: 50px;
  transform: rotateY(-180deg) rotateZ(-90deg);
}

circle {
  stroke-dasharray: 125px;
  stroke-dashoffset: 0px;
  stroke-linecap: round;
  stroke-width: 2px;
  stroke: white;
  fill: none;
  animation: countdown 31s linear infinite forwards;
}

@keyframes countdown {
  from {
    stroke-dashoffset: 0px;
  }
  to {
    stroke-dashoffset: 125px;
  }
} */


    </style>
    <title>nahidaQuest!</title>
</head>
<body style="background: url(./spare/bg1.png);width: device-width;height:1000px;background-repeat: no-repeat;background-size: 100%;">
    <p style="position: absolute;">Saved name is:</p>
    <p style="left:10px; top:40px; position: absolute;" id="demo"></p>

  <div class="container">
    <div id="app1"></div>
    <div id="app2"></div>
  </div>


    
    <div style="left:10px; top:100px;position: absolute;">
        <button id="add"  style="height:100px;width:100px;left:100px;position: absolute;">add</button>
    <button id="save"  style="height:100px;width:100px;left:200px;position: absolute;">save</button>
    <button id="clear"  style="height:100px;width:100px;left:300px;position: absolute;">clear</button>
    </div>
    



    <script type="module">
    import { upgradeDictDefault } from "./test_script.js"
    var demoBut = document.getElementById("demo");
    var addBut = document.getElementById("add");
    var saveBut = document.getElementById("save");
    var clearBut = document.getElementById("clear");
    var upgradeDict = "";
    var fadeCooldown = "";

    addBut.addEventListener("click",()=> animateImage())
    addBut.addEventListener("click",function(event) {
      const x = event.clientX;
    const y = event.clientY;
    console.log(y)

    const text = document.createElement("div");
    text.innerHTML = "Hello World!";
    text.classList.add("floatingText");
    text.style.left = x + "px";
    text.style.top = y - 40 +"px";
    document.body.appendChild(text);

    setTimeout(function() {
      text.remove();
    }, 2000);
  });


    saveBut.addEventListener("click",()=> foodButton2())
    clearBut.addEventListener("click",function() {clear()})

    // var currentTime = 0;
    //  var timer = setInterval(() => animateImage(), 200)
    
    
    

    function animateImage() {
    var img = document.createElement("img");
    img.src = "./assets/icon/primogemIcon.png";
    img.style.left = `${(Math.random() * 20) + 50}vw`
    let number = (Math.random() * 3) + 1.5;

    let animation = `fall ${number}s ease-in, fadeOut ${number}s cubic-bezier(1,.05,.55,1.04)`
    img.style.animation = animation;


    img.addEventListener('animationend', () => {
    img.remove();
    });
    img.classList.add("falling-image");
    document.body.appendChild(img);
}






















// function count() {
//   foodCheck();
//   currentTime++
// }

// var timeSnapshot = 0;
// var timeSnapshot2 = 0;
// function foodCheck() {
//   if (currentTime - timeSnapshot >= 30) {
//     onTimesUp(1);
//   }

//   if (currentTime - timeSnapshot2 >= 30) {
//     onTimesUp(2);
//   }

// }

// function foodButton() {
//   timeSnapshot = currentTime;
//   document.getElementById("app1").innerHTML = countdownText(1);
// }

// function foodButton2() {
//   timeSnapshot = currentTime;
//   document.getElementById("app2").innerHTML = countdownText(2);
// }

// function countdownText(int) {
//   return `<div id="countdown">
//   <div class="countdown-number" style=${'background:url(./assets/food'+int+'.webp);'}>
//     <svg>
//     <circle r="20" cx="21" cy="21"></circle>
//     </svg>  
//   </div>
  
// </div>`
// }

//  function onTimesUp(int) {
//    document.getElementById("app"+int).innerHTML = '';
//  }


 ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    if (localStorage.getItem("upgradeDictSave") === null) {
        upgradeDict = upgradeDictDefault;
        demoBut.innerHTML = upgradeDict[0]["Level"];
    } else {
        let upgradeDictTemp = window.localStorage.getItem("upgradeDictSave");
        upgradeDict = JSON.parse(upgradeDictTemp)
        demoBut.innerHTML = upgradeDict[0]["Level"];
    }

    function add() {
        upgradeDict[0]["Level"]++;
        console.log(upgradeDict[0]["Level"])
        demoBut.innerHTML = upgradeDict[0]["Level"];
    }

    function save() {
         localStorage.setItem("upgradeDictSave", JSON.stringify(upgradeDict));
         console.log(JSON.stringify(upgradeDict))
  }

    function clear() {
        localStorage.clear();
    }
        
        
        
    </script>









</body>
</html>